{"ast":null,"code":"// Copyright 2017 Joyent, Inc.\n\nmodule.exports = Identity;\nvar assert = require('assert-plus');\nvar algs = require('./algs');\nvar crypto = require('crypto');\nvar Fingerprint = require('./fingerprint');\nvar Signature = require('./signature');\nvar errs = require('./errors');\nvar util = require('util');\nvar utils = require('./utils');\nvar asn1 = require('asn1');\nvar Buffer = require('safer-buffer').Buffer;\n\n/*JSSTYLED*/\nvar DNS_NAME_RE = /^([*]|[a-z0-9][a-z0-9\\-]{0,62})(?:\\.([*]|[a-z0-9][a-z0-9\\-]{0,62}))*$/i;\nvar oids = {};\noids.cn = '2.5.4.3';\noids.o = '2.5.4.10';\noids.ou = '2.5.4.11';\noids.l = '2.5.4.7';\noids.s = '2.5.4.8';\noids.c = '2.5.4.6';\noids.sn = '2.5.4.4';\noids.postalCode = '2.5.4.17';\noids.serialNumber = '2.5.4.5';\noids.street = '2.5.4.9';\noids.x500UniqueIdentifier = '2.5.4.45';\noids.role = '2.5.4.72';\noids.telephoneNumber = '2.5.4.20';\noids.description = '2.5.4.13';\noids.dc = '0.9.2342.19200300.100.1.25';\noids.uid = '0.9.2342.19200300.100.1.1';\noids.mail = '0.9.2342.19200300.100.1.3';\noids.title = '2.5.4.12';\noids.gn = '2.5.4.42';\noids.initials = '2.5.4.43';\noids.pseudonym = '2.5.4.65';\noids.emailAddress = '1.2.840.113549.1.9.1';\nvar unoids = {};\nObject.keys(oids).forEach(function (k) {\n  unoids[oids[k]] = k;\n});\nfunction Identity(opts) {\n  var self = this;\n  assert.object(opts, 'options');\n  assert.arrayOfObject(opts.components, 'options.components');\n  this.components = opts.components;\n  this.componentLookup = {};\n  this.components.forEach(function (c) {\n    if (c.name && !c.oid) c.oid = oids[c.name];\n    if (c.oid && !c.name) c.name = unoids[c.oid];\n    if (self.componentLookup[c.name] === undefined) self.componentLookup[c.name] = [];\n    self.componentLookup[c.name].push(c);\n  });\n  if (this.componentLookup.cn && this.componentLookup.cn.length > 0) {\n    this.cn = this.componentLookup.cn[0].value;\n  }\n  assert.optionalString(opts.type, 'options.type');\n  if (opts.type === undefined) {\n    if (this.components.length === 1 && this.componentLookup.cn && this.componentLookup.cn.length === 1 && this.componentLookup.cn[0].value.match(DNS_NAME_RE)) {\n      this.type = 'host';\n      this.hostname = this.componentLookup.cn[0].value;\n    } else if (this.componentLookup.dc && this.components.length === this.componentLookup.dc.length) {\n      this.type = 'host';\n      this.hostname = this.componentLookup.dc.map(function (c) {\n        return c.value;\n      }).join('.');\n    } else if (this.componentLookup.uid && this.components.length === this.componentLookup.uid.length) {\n      this.type = 'user';\n      this.uid = this.componentLookup.uid[0].value;\n    } else if (this.componentLookup.cn && this.componentLookup.cn.length === 1 && this.componentLookup.cn[0].value.match(DNS_NAME_RE)) {\n      this.type = 'host';\n      this.hostname = this.componentLookup.cn[0].value;\n    } else if (this.componentLookup.uid && this.componentLookup.uid.length === 1) {\n      this.type = 'user';\n      this.uid = this.componentLookup.uid[0].value;\n    } else if (this.componentLookup.mail && this.componentLookup.mail.length === 1) {\n      this.type = 'email';\n      this.email = this.componentLookup.mail[0].value;\n    } else if (this.componentLookup.cn && this.componentLookup.cn.length === 1) {\n      this.type = 'user';\n      this.uid = this.componentLookup.cn[0].value;\n    } else {\n      this.type = 'unknown';\n    }\n  } else {\n    this.type = opts.type;\n    if (this.type === 'host') this.hostname = opts.hostname;else if (this.type === 'user') this.uid = opts.uid;else if (this.type === 'email') this.email = opts.email;else throw new Error('Unknown type ' + this.type);\n  }\n}\nIdentity.prototype.toString = function () {\n  return this.components.map(function (c) {\n    var n = c.name.toUpperCase();\n    /*JSSTYLED*/\n    n = n.replace(/=/g, '\\\\=');\n    var v = c.value;\n    /*JSSTYLED*/\n    v = v.replace(/,/g, '\\\\,');\n    return n + '=' + v;\n  }).join(', ');\n};\nIdentity.prototype.get = function (name, asArray) {\n  assert.string(name, 'name');\n  var arr = this.componentLookup[name];\n  if (arr === undefined || arr.length === 0) return undefined;\n  if (!asArray && arr.length > 1) throw new Error('Multiple values for attribute ' + name);\n  if (!asArray) return arr[0].value;\n  return arr.map(function (c) {\n    return c.value;\n  });\n};\nIdentity.prototype.toArray = function (idx) {\n  return this.components.map(function (c) {\n    return {\n      name: c.name,\n      value: c.value\n    };\n  });\n};\n\n/*\n * These are from X.680 -- PrintableString allowed chars are in section 37.4\n * table 8. Spec for IA5Strings is \"1,6 + SPACE + DEL\" where 1 refers to\n * ISO IR #001 (standard ASCII control characters) and 6 refers to ISO IR #006\n * (the basic ASCII character set).\n */\n/* JSSTYLED */\nvar NOT_PRINTABLE = /[^a-zA-Z0-9 '(),+.\\/:=?-]/;\n/* JSSTYLED */\nvar NOT_IA5 = /[^\\x00-\\x7f]/;\nIdentity.prototype.toAsn1 = function (der, tag) {\n  der.startSequence(tag);\n  this.components.forEach(function (c) {\n    der.startSequence(asn1.Ber.Constructor | asn1.Ber.Set);\n    der.startSequence();\n    der.writeOID(c.oid);\n    /*\n     * If we fit in a PrintableString, use that. Otherwise use an\n     * IA5String or UTF8String.\n     *\n     * If this identity was parsed from a DN, use the ASN.1 types\n     * from the original representation (otherwise this might not\n     * be a full match for the original in some validators).\n     */\n    if (c.asn1type === asn1.Ber.Utf8String || c.value.match(NOT_IA5)) {\n      var v = Buffer.from(c.value, 'utf8');\n      der.writeBuffer(v, asn1.Ber.Utf8String);\n    } else if (c.asn1type === asn1.Ber.IA5String || c.value.match(NOT_PRINTABLE)) {\n      der.writeString(c.value, asn1.Ber.IA5String);\n    } else {\n      var type = asn1.Ber.PrintableString;\n      if (c.asn1type !== undefined) type = c.asn1type;\n      der.writeString(c.value, type);\n    }\n    der.endSequence();\n    der.endSequence();\n  });\n  der.endSequence();\n};\nfunction globMatch(a, b) {\n  if (a === '**' || b === '**') return true;\n  var aParts = a.split('.');\n  var bParts = b.split('.');\n  if (aParts.length !== bParts.length) return false;\n  for (var i = 0; i < aParts.length; ++i) {\n    if (aParts[i] === '*' || bParts[i] === '*') continue;\n    if (aParts[i] !== bParts[i]) return false;\n  }\n  return true;\n}\nIdentity.prototype.equals = function (other) {\n  if (!Identity.isIdentity(other, [1, 0])) return false;\n  if (other.components.length !== this.components.length) return false;\n  for (var i = 0; i < this.components.length; ++i) {\n    if (this.components[i].oid !== other.components[i].oid) return false;\n    if (!globMatch(this.components[i].value, other.components[i].value)) {\n      return false;\n    }\n  }\n  return true;\n};\nIdentity.forHost = function (hostname) {\n  assert.string(hostname, 'hostname');\n  return new Identity({\n    type: 'host',\n    hostname: hostname,\n    components: [{\n      name: 'cn',\n      value: hostname\n    }]\n  });\n};\nIdentity.forUser = function (uid) {\n  assert.string(uid, 'uid');\n  return new Identity({\n    type: 'user',\n    uid: uid,\n    components: [{\n      name: 'uid',\n      value: uid\n    }]\n  });\n};\nIdentity.forEmail = function (email) {\n  assert.string(email, 'email');\n  return new Identity({\n    type: 'email',\n    email: email,\n    components: [{\n      name: 'mail',\n      value: email\n    }]\n  });\n};\nIdentity.parseDN = function (dn) {\n  assert.string(dn, 'dn');\n  var parts = [''];\n  var idx = 0;\n  var rem = dn;\n  while (rem.length > 0) {\n    var m;\n    /*JSSTYLED*/\n    if ((m = /^,/.exec(rem)) !== null) {\n      parts[++idx] = '';\n      rem = rem.slice(m[0].length);\n      /*JSSTYLED*/\n    } else if ((m = /^\\\\,/.exec(rem)) !== null) {\n      parts[idx] += ',';\n      rem = rem.slice(m[0].length);\n      /*JSSTYLED*/\n    } else if ((m = /^\\\\./.exec(rem)) !== null) {\n      parts[idx] += m[0];\n      rem = rem.slice(m[0].length);\n      /*JSSTYLED*/\n    } else if ((m = /^[^\\\\,]+/.exec(rem)) !== null) {\n      parts[idx] += m[0];\n      rem = rem.slice(m[0].length);\n    } else {\n      throw new Error('Failed to parse DN');\n    }\n  }\n  var cmps = parts.map(function (c) {\n    c = c.trim();\n    var eqPos = c.indexOf('=');\n    while (eqPos > 0 && c.charAt(eqPos - 1) === '\\\\') eqPos = c.indexOf('=', eqPos + 1);\n    if (eqPos === -1) {\n      throw new Error('Failed to parse DN');\n    }\n    /*JSSTYLED*/\n    var name = c.slice(0, eqPos).toLowerCase().replace(/\\\\=/g, '=');\n    var value = c.slice(eqPos + 1);\n    return {\n      name: name,\n      value: value\n    };\n  });\n  return new Identity({\n    components: cmps\n  });\n};\nIdentity.fromArray = function (components) {\n  assert.arrayOfObject(components, 'components');\n  components.forEach(function (cmp) {\n    assert.object(cmp, 'component');\n    assert.string(cmp.name, 'component.name');\n    if (!Buffer.isBuffer(cmp.value) && !(typeof cmp.value === 'string')) {\n      throw new Error('Invalid component value');\n    }\n  });\n  return new Identity({\n    components: components\n  });\n};\nIdentity.parseAsn1 = function (der, top) {\n  var components = [];\n  der.readSequence(top);\n  var end = der.offset + der.length;\n  while (der.offset < end) {\n    der.readSequence(asn1.Ber.Constructor | asn1.Ber.Set);\n    var after = der.offset + der.length;\n    der.readSequence();\n    var oid = der.readOID();\n    var type = der.peek();\n    var value;\n    switch (type) {\n      case asn1.Ber.PrintableString:\n      case asn1.Ber.IA5String:\n      case asn1.Ber.OctetString:\n      case asn1.Ber.T61String:\n        value = der.readString(type);\n        break;\n      case asn1.Ber.Utf8String:\n        value = der.readString(type, true);\n        value = value.toString('utf8');\n        break;\n      case asn1.Ber.CharacterString:\n      case asn1.Ber.BMPString:\n        value = der.readString(type, true);\n        value = value.toString('utf16le');\n        break;\n      default:\n        throw new Error('Unknown asn1 type ' + type);\n    }\n    components.push({\n      oid: oid,\n      asn1type: type,\n      value: value\n    });\n    der._offset = after;\n  }\n  der._offset = end;\n  return new Identity({\n    components: components\n  });\n};\nIdentity.isIdentity = function (obj, ver) {\n  return utils.isCompatible(obj, Identity, ver);\n};\n\n/*\n * API versions for Identity:\n * [1,0] -- initial ver\n */\nIdentity.prototype._sshpkApiVersion = [1, 0];\nIdentity._oldVersionDetect = function (obj) {\n  return [1, 0];\n};","map":{"version":3,"names":["module","exports","Identity","assert","require","algs","crypto","Fingerprint","Signature","errs","util","utils","asn1","Buffer","DNS_NAME_RE","oids","cn","o","ou","l","s","c","sn","postalCode","serialNumber","street","x500UniqueIdentifier","role","telephoneNumber","description","dc","uid","mail","title","gn","initials","pseudonym","emailAddress","unoids","Object","keys","forEach","k","opts","self","object","arrayOfObject","components","componentLookup","name","oid","undefined","push","length","value","optionalString","type","match","hostname","map","join","email","Error","prototype","toString","n","toUpperCase","replace","v","get","asArray","string","arr","toArray","idx","NOT_PRINTABLE","NOT_IA5","toAsn1","der","tag","startSequence","Ber","Constructor","Set","writeOID","asn1type","Utf8String","from","writeBuffer","IA5String","writeString","PrintableString","endSequence","globMatch","a","b","aParts","split","bParts","i","equals","other","isIdentity","forHost","forUser","forEmail","parseDN","dn","parts","rem","m","exec","slice","cmps","trim","eqPos","indexOf","charAt","toLowerCase","fromArray","cmp","isBuffer","parseAsn1","top","readSequence","end","offset","after","readOID","peek","OctetString","T61String","readString","CharacterString","BMPString","_offset","obj","ver","isCompatible","_sshpkApiVersion","_oldVersionDetect"],"sources":["/Users/mohitgupta/Downloads/orgs/Clone/inst/node_modules/sshpk/lib/identity.js"],"sourcesContent":["// Copyright 2017 Joyent, Inc.\n\nmodule.exports = Identity;\n\nvar assert = require('assert-plus');\nvar algs = require('./algs');\nvar crypto = require('crypto');\nvar Fingerprint = require('./fingerprint');\nvar Signature = require('./signature');\nvar errs = require('./errors');\nvar util = require('util');\nvar utils = require('./utils');\nvar asn1 = require('asn1');\nvar Buffer = require('safer-buffer').Buffer;\n\n/*JSSTYLED*/\nvar DNS_NAME_RE = /^([*]|[a-z0-9][a-z0-9\\-]{0,62})(?:\\.([*]|[a-z0-9][a-z0-9\\-]{0,62}))*$/i;\n\nvar oids = {};\noids.cn = '2.5.4.3';\noids.o = '2.5.4.10';\noids.ou = '2.5.4.11';\noids.l = '2.5.4.7';\noids.s = '2.5.4.8';\noids.c = '2.5.4.6';\noids.sn = '2.5.4.4';\noids.postalCode = '2.5.4.17';\noids.serialNumber = '2.5.4.5';\noids.street = '2.5.4.9';\noids.x500UniqueIdentifier = '2.5.4.45';\noids.role = '2.5.4.72';\noids.telephoneNumber = '2.5.4.20';\noids.description = '2.5.4.13';\noids.dc = '0.9.2342.19200300.100.1.25';\noids.uid = '0.9.2342.19200300.100.1.1';\noids.mail = '0.9.2342.19200300.100.1.3';\noids.title = '2.5.4.12';\noids.gn = '2.5.4.42';\noids.initials = '2.5.4.43';\noids.pseudonym = '2.5.4.65';\noids.emailAddress = '1.2.840.113549.1.9.1';\n\nvar unoids = {};\nObject.keys(oids).forEach(function (k) {\n\tunoids[oids[k]] = k;\n});\n\nfunction Identity(opts) {\n\tvar self = this;\n\tassert.object(opts, 'options');\n\tassert.arrayOfObject(opts.components, 'options.components');\n\tthis.components = opts.components;\n\tthis.componentLookup = {};\n\tthis.components.forEach(function (c) {\n\t\tif (c.name && !c.oid)\n\t\t\tc.oid = oids[c.name];\n\t\tif (c.oid && !c.name)\n\t\t\tc.name = unoids[c.oid];\n\t\tif (self.componentLookup[c.name] === undefined)\n\t\t\tself.componentLookup[c.name] = [];\n\t\tself.componentLookup[c.name].push(c);\n\t});\n\tif (this.componentLookup.cn && this.componentLookup.cn.length > 0) {\n\t\tthis.cn = this.componentLookup.cn[0].value;\n\t}\n\tassert.optionalString(opts.type, 'options.type');\n\tif (opts.type === undefined) {\n\t\tif (this.components.length === 1 &&\n\t\t    this.componentLookup.cn &&\n\t\t    this.componentLookup.cn.length === 1 &&\n\t\t    this.componentLookup.cn[0].value.match(DNS_NAME_RE)) {\n\t\t\tthis.type = 'host';\n\t\t\tthis.hostname = this.componentLookup.cn[0].value;\n\n\t\t} else if (this.componentLookup.dc &&\n\t\t    this.components.length === this.componentLookup.dc.length) {\n\t\t\tthis.type = 'host';\n\t\t\tthis.hostname = this.componentLookup.dc.map(\n\t\t\t    function (c) {\n\t\t\t\treturn (c.value);\n\t\t\t}).join('.');\n\n\t\t} else if (this.componentLookup.uid &&\n\t\t    this.components.length ===\n\t\t    this.componentLookup.uid.length) {\n\t\t\tthis.type = 'user';\n\t\t\tthis.uid = this.componentLookup.uid[0].value;\n\n\t\t} else if (this.componentLookup.cn &&\n\t\t    this.componentLookup.cn.length === 1 &&\n\t\t    this.componentLookup.cn[0].value.match(DNS_NAME_RE)) {\n\t\t\tthis.type = 'host';\n\t\t\tthis.hostname = this.componentLookup.cn[0].value;\n\n\t\t} else if (this.componentLookup.uid &&\n\t\t    this.componentLookup.uid.length === 1) {\n\t\t\tthis.type = 'user';\n\t\t\tthis.uid = this.componentLookup.uid[0].value;\n\n\t\t} else if (this.componentLookup.mail &&\n\t\t    this.componentLookup.mail.length === 1) {\n\t\t\tthis.type = 'email';\n\t\t\tthis.email = this.componentLookup.mail[0].value;\n\n\t\t} else if (this.componentLookup.cn &&\n\t\t    this.componentLookup.cn.length === 1) {\n\t\t\tthis.type = 'user';\n\t\t\tthis.uid = this.componentLookup.cn[0].value;\n\n\t\t} else {\n\t\t\tthis.type = 'unknown';\n\t\t}\n\t} else {\n\t\tthis.type = opts.type;\n\t\tif (this.type === 'host')\n\t\t\tthis.hostname = opts.hostname;\n\t\telse if (this.type === 'user')\n\t\t\tthis.uid = opts.uid;\n\t\telse if (this.type === 'email')\n\t\t\tthis.email = opts.email;\n\t\telse\n\t\t\tthrow (new Error('Unknown type ' + this.type));\n\t}\n}\n\nIdentity.prototype.toString = function () {\n\treturn (this.components.map(function (c) {\n\t\tvar n = c.name.toUpperCase();\n\t\t/*JSSTYLED*/\n\t\tn = n.replace(/=/g, '\\\\=');\n\t\tvar v = c.value;\n\t\t/*JSSTYLED*/\n\t\tv = v.replace(/,/g, '\\\\,');\n\t\treturn (n + '=' + v);\n\t}).join(', '));\n};\n\nIdentity.prototype.get = function (name, asArray) {\n\tassert.string(name, 'name');\n\tvar arr = this.componentLookup[name];\n\tif (arr === undefined || arr.length === 0)\n\t\treturn (undefined);\n\tif (!asArray && arr.length > 1)\n\t\tthrow (new Error('Multiple values for attribute ' + name));\n\tif (!asArray)\n\t\treturn (arr[0].value);\n\treturn (arr.map(function (c) {\n\t\treturn (c.value);\n\t}));\n};\n\nIdentity.prototype.toArray = function (idx) {\n\treturn (this.components.map(function (c) {\n\t\treturn ({\n\t\t\tname: c.name,\n\t\t\tvalue: c.value\n\t\t});\n\t}));\n};\n\n/*\n * These are from X.680 -- PrintableString allowed chars are in section 37.4\n * table 8. Spec for IA5Strings is \"1,6 + SPACE + DEL\" where 1 refers to\n * ISO IR #001 (standard ASCII control characters) and 6 refers to ISO IR #006\n * (the basic ASCII character set).\n */\n/* JSSTYLED */\nvar NOT_PRINTABLE = /[^a-zA-Z0-9 '(),+.\\/:=?-]/;\n/* JSSTYLED */\nvar NOT_IA5 = /[^\\x00-\\x7f]/;\n\nIdentity.prototype.toAsn1 = function (der, tag) {\n\tder.startSequence(tag);\n\tthis.components.forEach(function (c) {\n\t\tder.startSequence(asn1.Ber.Constructor | asn1.Ber.Set);\n\t\tder.startSequence();\n\t\tder.writeOID(c.oid);\n\t\t/*\n\t\t * If we fit in a PrintableString, use that. Otherwise use an\n\t\t * IA5String or UTF8String.\n\t\t *\n\t\t * If this identity was parsed from a DN, use the ASN.1 types\n\t\t * from the original representation (otherwise this might not\n\t\t * be a full match for the original in some validators).\n\t\t */\n\t\tif (c.asn1type === asn1.Ber.Utf8String ||\n\t\t    c.value.match(NOT_IA5)) {\n\t\t\tvar v = Buffer.from(c.value, 'utf8');\n\t\t\tder.writeBuffer(v, asn1.Ber.Utf8String);\n\n\t\t} else if (c.asn1type === asn1.Ber.IA5String ||\n\t\t    c.value.match(NOT_PRINTABLE)) {\n\t\t\tder.writeString(c.value, asn1.Ber.IA5String);\n\n\t\t} else {\n\t\t\tvar type = asn1.Ber.PrintableString;\n\t\t\tif (c.asn1type !== undefined)\n\t\t\t\ttype = c.asn1type;\n\t\t\tder.writeString(c.value, type);\n\t\t}\n\t\tder.endSequence();\n\t\tder.endSequence();\n\t});\n\tder.endSequence();\n};\n\nfunction globMatch(a, b) {\n\tif (a === '**' || b === '**')\n\t\treturn (true);\n\tvar aParts = a.split('.');\n\tvar bParts = b.split('.');\n\tif (aParts.length !== bParts.length)\n\t\treturn (false);\n\tfor (var i = 0; i < aParts.length; ++i) {\n\t\tif (aParts[i] === '*' || bParts[i] === '*')\n\t\t\tcontinue;\n\t\tif (aParts[i] !== bParts[i])\n\t\t\treturn (false);\n\t}\n\treturn (true);\n}\n\nIdentity.prototype.equals = function (other) {\n\tif (!Identity.isIdentity(other, [1, 0]))\n\t\treturn (false);\n\tif (other.components.length !== this.components.length)\n\t\treturn (false);\n\tfor (var i = 0; i < this.components.length; ++i) {\n\t\tif (this.components[i].oid !== other.components[i].oid)\n\t\t\treturn (false);\n\t\tif (!globMatch(this.components[i].value,\n\t\t    other.components[i].value)) {\n\t\t\treturn (false);\n\t\t}\n\t}\n\treturn (true);\n};\n\nIdentity.forHost = function (hostname) {\n\tassert.string(hostname, 'hostname');\n\treturn (new Identity({\n\t\ttype: 'host',\n\t\thostname: hostname,\n\t\tcomponents: [ { name: 'cn', value: hostname } ]\n\t}));\n};\n\nIdentity.forUser = function (uid) {\n\tassert.string(uid, 'uid');\n\treturn (new Identity({\n\t\ttype: 'user',\n\t\tuid: uid,\n\t\tcomponents: [ { name: 'uid', value: uid } ]\n\t}));\n};\n\nIdentity.forEmail = function (email) {\n\tassert.string(email, 'email');\n\treturn (new Identity({\n\t\ttype: 'email',\n\t\temail: email,\n\t\tcomponents: [ { name: 'mail', value: email } ]\n\t}));\n};\n\nIdentity.parseDN = function (dn) {\n\tassert.string(dn, 'dn');\n\tvar parts = [''];\n\tvar idx = 0;\n\tvar rem = dn;\n\twhile (rem.length > 0) {\n\t\tvar m;\n\t\t/*JSSTYLED*/\n\t\tif ((m = /^,/.exec(rem)) !== null) {\n\t\t\tparts[++idx] = '';\n\t\t\trem = rem.slice(m[0].length);\n\t\t/*JSSTYLED*/\n\t\t} else if ((m = /^\\\\,/.exec(rem)) !== null) {\n\t\t\tparts[idx] += ',';\n\t\t\trem = rem.slice(m[0].length);\n\t\t/*JSSTYLED*/\n\t\t} else if ((m = /^\\\\./.exec(rem)) !== null) {\n\t\t\tparts[idx] += m[0];\n\t\t\trem = rem.slice(m[0].length);\n\t\t/*JSSTYLED*/\n\t\t} else if ((m = /^[^\\\\,]+/.exec(rem)) !== null) {\n\t\t\tparts[idx] += m[0];\n\t\t\trem = rem.slice(m[0].length);\n\t\t} else {\n\t\t\tthrow (new Error('Failed to parse DN'));\n\t\t}\n\t}\n\tvar cmps = parts.map(function (c) {\n\t\tc = c.trim();\n\t\tvar eqPos = c.indexOf('=');\n\t\twhile (eqPos > 0 && c.charAt(eqPos - 1) === '\\\\')\n\t\t\teqPos = c.indexOf('=', eqPos + 1);\n\t\tif (eqPos === -1) {\n\t\t\tthrow (new Error('Failed to parse DN'));\n\t\t}\n\t\t/*JSSTYLED*/\n\t\tvar name = c.slice(0, eqPos).toLowerCase().replace(/\\\\=/g, '=');\n\t\tvar value = c.slice(eqPos + 1);\n\t\treturn ({ name: name, value: value });\n\t});\n\treturn (new Identity({ components: cmps }));\n};\n\nIdentity.fromArray = function (components) {\n\tassert.arrayOfObject(components, 'components');\n\tcomponents.forEach(function (cmp) {\n\t\tassert.object(cmp, 'component');\n\t\tassert.string(cmp.name, 'component.name');\n\t\tif (!Buffer.isBuffer(cmp.value) &&\n\t\t    !(typeof (cmp.value) === 'string')) {\n\t\t\tthrow (new Error('Invalid component value'));\n\t\t}\n\t});\n\treturn (new Identity({ components: components }));\n};\n\nIdentity.parseAsn1 = function (der, top) {\n\tvar components = [];\n\tder.readSequence(top);\n\tvar end = der.offset + der.length;\n\twhile (der.offset < end) {\n\t\tder.readSequence(asn1.Ber.Constructor | asn1.Ber.Set);\n\t\tvar after = der.offset + der.length;\n\t\tder.readSequence();\n\t\tvar oid = der.readOID();\n\t\tvar type = der.peek();\n\t\tvar value;\n\t\tswitch (type) {\n\t\tcase asn1.Ber.PrintableString:\n\t\tcase asn1.Ber.IA5String:\n\t\tcase asn1.Ber.OctetString:\n\t\tcase asn1.Ber.T61String:\n\t\t\tvalue = der.readString(type);\n\t\t\tbreak;\n\t\tcase asn1.Ber.Utf8String:\n\t\t\tvalue = der.readString(type, true);\n\t\t\tvalue = value.toString('utf8');\n\t\t\tbreak;\n\t\tcase asn1.Ber.CharacterString:\n\t\tcase asn1.Ber.BMPString:\n\t\t\tvalue = der.readString(type, true);\n\t\t\tvalue = value.toString('utf16le');\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow (new Error('Unknown asn1 type ' + type));\n\t\t}\n\t\tcomponents.push({ oid: oid, asn1type: type, value: value });\n\t\tder._offset = after;\n\t}\n\tder._offset = end;\n\treturn (new Identity({\n\t\tcomponents: components\n\t}));\n};\n\nIdentity.isIdentity = function (obj, ver) {\n\treturn (utils.isCompatible(obj, Identity, ver));\n};\n\n/*\n * API versions for Identity:\n * [1,0] -- initial ver\n */\nIdentity.prototype._sshpkApiVersion = [1, 0];\n\nIdentity._oldVersionDetect = function (obj) {\n\treturn ([1, 0]);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}