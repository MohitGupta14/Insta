{"ast":null,"code":"'use strict';\n\nvar url = require('url');\nvar qs = require('qs');\nvar caseless = require('caseless');\nvar uuid = require('uuid');\nvar oauth = require('oauth-sign');\nvar crypto = require('crypto');\nvar Buffer = require('safe-buffer').Buffer;\nfunction OAuth(request) {\n  this.request = request;\n  this.params = null;\n}\nOAuth.prototype.buildParams = function (_oauth, uri, method, query, form, qsLib) {\n  var oa = {};\n  for (var i in _oauth) {\n    oa['oauth_' + i] = _oauth[i];\n  }\n  if (!oa.oauth_version) {\n    oa.oauth_version = '1.0';\n  }\n  if (!oa.oauth_timestamp) {\n    oa.oauth_timestamp = Math.floor(Date.now() / 1000).toString();\n  }\n  if (!oa.oauth_nonce) {\n    oa.oauth_nonce = uuid().replace(/-/g, '');\n  }\n  if (!oa.oauth_signature_method) {\n    oa.oauth_signature_method = 'HMAC-SHA1';\n  }\n  var consumer_secret_or_private_key = oa.oauth_consumer_secret || oa.oauth_private_key; // eslint-disable-line camelcase\n  delete oa.oauth_consumer_secret;\n  delete oa.oauth_private_key;\n  var token_secret = oa.oauth_token_secret; // eslint-disable-line camelcase\n  delete oa.oauth_token_secret;\n  var realm = oa.oauth_realm;\n  delete oa.oauth_realm;\n  delete oa.oauth_transport_method;\n  var baseurl = uri.protocol + '//' + uri.host + uri.pathname;\n  var params = qsLib.parse([].concat(query, form, qsLib.stringify(oa)).join('&'));\n  oa.oauth_signature = oauth.sign(oa.oauth_signature_method, method, baseurl, params, consumer_secret_or_private_key,\n  // eslint-disable-line camelcase\n  token_secret // eslint-disable-line camelcase\n  );\n\n  if (realm) {\n    oa.realm = realm;\n  }\n  return oa;\n};\nOAuth.prototype.buildBodyHash = function (_oauth, body) {\n  if (['HMAC-SHA1', 'RSA-SHA1'].indexOf(_oauth.signature_method || 'HMAC-SHA1') < 0) {\n    this.request.emit('error', new Error('oauth: ' + _oauth.signature_method + ' signature_method not supported with body_hash signing.'));\n  }\n  var shasum = crypto.createHash('sha1');\n  shasum.update(body || '');\n  var sha1 = shasum.digest('hex');\n  return Buffer.from(sha1, 'hex').toString('base64');\n};\nOAuth.prototype.concatParams = function (oa, sep, wrap) {\n  wrap = wrap || '';\n  var params = Object.keys(oa).filter(function (i) {\n    return i !== 'realm' && i !== 'oauth_signature';\n  }).sort();\n  if (oa.realm) {\n    params.splice(0, 0, 'realm');\n  }\n  params.push('oauth_signature');\n  return params.map(function (i) {\n    return i + '=' + wrap + oauth.rfc3986(oa[i]) + wrap;\n  }).join(sep);\n};\nOAuth.prototype.onRequest = function (_oauth) {\n  var self = this;\n  self.params = _oauth;\n  var uri = self.request.uri || {};\n  var method = self.request.method || '';\n  var headers = caseless(self.request.headers);\n  var body = self.request.body || '';\n  var qsLib = self.request.qsLib || qs;\n  var form;\n  var query;\n  var contentType = headers.get('content-type') || '';\n  var formContentType = 'application/x-www-form-urlencoded';\n  var transport = _oauth.transport_method || 'header';\n  if (contentType.slice(0, formContentType.length) === formContentType) {\n    contentType = formContentType;\n    form = body;\n  }\n  if (uri.query) {\n    query = uri.query;\n  }\n  if (transport === 'body' && (method !== 'POST' || contentType !== formContentType)) {\n    self.request.emit('error', new Error('oauth: transport_method of body requires POST ' + 'and content-type ' + formContentType));\n  }\n  if (!form && typeof _oauth.body_hash === 'boolean') {\n    _oauth.body_hash = self.buildBodyHash(_oauth, self.request.body.toString());\n  }\n  var oa = self.buildParams(_oauth, uri, method, query, form, qsLib);\n  switch (transport) {\n    case 'header':\n      self.request.setHeader('Authorization', 'OAuth ' + self.concatParams(oa, ',', '\"'));\n      break;\n    case 'query':\n      var href = self.request.uri.href += (query ? '&' : '?') + self.concatParams(oa, '&');\n      self.request.uri = url.parse(href);\n      self.request.path = self.request.uri.path;\n      break;\n    case 'body':\n      self.request.body = (form ? form + '&' : '') + self.concatParams(oa, '&');\n      break;\n    default:\n      self.request.emit('error', new Error('oauth: transport_method invalid'));\n  }\n};\nexports.OAuth = OAuth;","map":{"version":3,"names":["url","require","qs","caseless","uuid","oauth","crypto","Buffer","OAuth","request","params","prototype","buildParams","_oauth","uri","method","query","form","qsLib","oa","i","oauth_version","oauth_timestamp","Math","floor","Date","now","toString","oauth_nonce","replace","oauth_signature_method","consumer_secret_or_private_key","oauth_consumer_secret","oauth_private_key","token_secret","oauth_token_secret","realm","oauth_realm","oauth_transport_method","baseurl","protocol","host","pathname","parse","concat","stringify","join","oauth_signature","sign","buildBodyHash","body","indexOf","signature_method","emit","Error","shasum","createHash","update","sha1","digest","from","concatParams","sep","wrap","Object","keys","filter","sort","splice","push","map","rfc3986","onRequest","self","headers","contentType","get","formContentType","transport","transport_method","slice","length","body_hash","setHeader","href","path","exports"],"sources":["/Users/mohitgupta/Downloads/orgs/Clone/inst/node_modules/request/lib/oauth.js"],"sourcesContent":["'use strict'\n\nvar url = require('url')\nvar qs = require('qs')\nvar caseless = require('caseless')\nvar uuid = require('uuid')\nvar oauth = require('oauth-sign')\nvar crypto = require('crypto')\nvar Buffer = require('safe-buffer').Buffer\n\nfunction OAuth (request) {\n  this.request = request\n  this.params = null\n}\n\nOAuth.prototype.buildParams = function (_oauth, uri, method, query, form, qsLib) {\n  var oa = {}\n  for (var i in _oauth) {\n    oa['oauth_' + i] = _oauth[i]\n  }\n  if (!oa.oauth_version) {\n    oa.oauth_version = '1.0'\n  }\n  if (!oa.oauth_timestamp) {\n    oa.oauth_timestamp = Math.floor(Date.now() / 1000).toString()\n  }\n  if (!oa.oauth_nonce) {\n    oa.oauth_nonce = uuid().replace(/-/g, '')\n  }\n  if (!oa.oauth_signature_method) {\n    oa.oauth_signature_method = 'HMAC-SHA1'\n  }\n\n  var consumer_secret_or_private_key = oa.oauth_consumer_secret || oa.oauth_private_key // eslint-disable-line camelcase\n  delete oa.oauth_consumer_secret\n  delete oa.oauth_private_key\n\n  var token_secret = oa.oauth_token_secret // eslint-disable-line camelcase\n  delete oa.oauth_token_secret\n\n  var realm = oa.oauth_realm\n  delete oa.oauth_realm\n  delete oa.oauth_transport_method\n\n  var baseurl = uri.protocol + '//' + uri.host + uri.pathname\n  var params = qsLib.parse([].concat(query, form, qsLib.stringify(oa)).join('&'))\n\n  oa.oauth_signature = oauth.sign(\n    oa.oauth_signature_method,\n    method,\n    baseurl,\n    params,\n    consumer_secret_or_private_key, // eslint-disable-line camelcase\n    token_secret // eslint-disable-line camelcase\n  )\n\n  if (realm) {\n    oa.realm = realm\n  }\n\n  return oa\n}\n\nOAuth.prototype.buildBodyHash = function (_oauth, body) {\n  if (['HMAC-SHA1', 'RSA-SHA1'].indexOf(_oauth.signature_method || 'HMAC-SHA1') < 0) {\n    this.request.emit('error', new Error('oauth: ' + _oauth.signature_method +\n      ' signature_method not supported with body_hash signing.'))\n  }\n\n  var shasum = crypto.createHash('sha1')\n  shasum.update(body || '')\n  var sha1 = shasum.digest('hex')\n\n  return Buffer.from(sha1, 'hex').toString('base64')\n}\n\nOAuth.prototype.concatParams = function (oa, sep, wrap) {\n  wrap = wrap || ''\n\n  var params = Object.keys(oa).filter(function (i) {\n    return i !== 'realm' && i !== 'oauth_signature'\n  }).sort()\n\n  if (oa.realm) {\n    params.splice(0, 0, 'realm')\n  }\n  params.push('oauth_signature')\n\n  return params.map(function (i) {\n    return i + '=' + wrap + oauth.rfc3986(oa[i]) + wrap\n  }).join(sep)\n}\n\nOAuth.prototype.onRequest = function (_oauth) {\n  var self = this\n  self.params = _oauth\n\n  var uri = self.request.uri || {}\n  var method = self.request.method || ''\n  var headers = caseless(self.request.headers)\n  var body = self.request.body || ''\n  var qsLib = self.request.qsLib || qs\n\n  var form\n  var query\n  var contentType = headers.get('content-type') || ''\n  var formContentType = 'application/x-www-form-urlencoded'\n  var transport = _oauth.transport_method || 'header'\n\n  if (contentType.slice(0, formContentType.length) === formContentType) {\n    contentType = formContentType\n    form = body\n  }\n  if (uri.query) {\n    query = uri.query\n  }\n  if (transport === 'body' && (method !== 'POST' || contentType !== formContentType)) {\n    self.request.emit('error', new Error('oauth: transport_method of body requires POST ' +\n      'and content-type ' + formContentType))\n  }\n\n  if (!form && typeof _oauth.body_hash === 'boolean') {\n    _oauth.body_hash = self.buildBodyHash(_oauth, self.request.body.toString())\n  }\n\n  var oa = self.buildParams(_oauth, uri, method, query, form, qsLib)\n\n  switch (transport) {\n    case 'header':\n      self.request.setHeader('Authorization', 'OAuth ' + self.concatParams(oa, ',', '\"'))\n      break\n\n    case 'query':\n      var href = self.request.uri.href += (query ? '&' : '?') + self.concatParams(oa, '&')\n      self.request.uri = url.parse(href)\n      self.request.path = self.request.uri.path\n      break\n\n    case 'body':\n      self.request.body = (form ? form + '&' : '') + self.concatParams(oa, '&')\n      break\n\n    default:\n      self.request.emit('error', new Error('oauth: transport_method invalid'))\n  }\n}\n\nexports.OAuth = OAuth\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}