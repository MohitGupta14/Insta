{"ast":null,"code":"'use strict';\n\nvar fs = require('fs');\nvar qs = require('querystring');\nvar validate = require('har-validator');\nvar extend = require('extend');\nfunction Har(request) {\n  this.request = request;\n}\nHar.prototype.reducer = function (obj, pair) {\n  // new property ?\n  if (obj[pair.name] === undefined) {\n    obj[pair.name] = pair.value;\n    return obj;\n  }\n\n  // existing? convert to array\n  var arr = [obj[pair.name], pair.value];\n  obj[pair.name] = arr;\n  return obj;\n};\nHar.prototype.prep = function (data) {\n  // construct utility properties\n  data.queryObj = {};\n  data.headersObj = {};\n  data.postData.jsonObj = false;\n  data.postData.paramsObj = false;\n\n  // construct query objects\n  if (data.queryString && data.queryString.length) {\n    data.queryObj = data.queryString.reduce(this.reducer, {});\n  }\n\n  // construct headers objects\n  if (data.headers && data.headers.length) {\n    // loweCase header keys\n    data.headersObj = data.headers.reduceRight(function (headers, header) {\n      headers[header.name] = header.value;\n      return headers;\n    }, {});\n  }\n\n  // construct Cookie header\n  if (data.cookies && data.cookies.length) {\n    var cookies = data.cookies.map(function (cookie) {\n      return cookie.name + '=' + cookie.value;\n    });\n    if (cookies.length) {\n      data.headersObj.cookie = cookies.join('; ');\n    }\n  }\n\n  // prep body\n  function some(arr) {\n    return arr.some(function (type) {\n      return data.postData.mimeType.indexOf(type) === 0;\n    });\n  }\n  if (some(['multipart/mixed', 'multipart/related', 'multipart/form-data', 'multipart/alternative'])) {\n    // reset values\n    data.postData.mimeType = 'multipart/form-data';\n  } else if (some(['application/x-www-form-urlencoded'])) {\n    if (!data.postData.params) {\n      data.postData.text = '';\n    } else {\n      data.postData.paramsObj = data.postData.params.reduce(this.reducer, {});\n\n      // always overwrite\n      data.postData.text = qs.stringify(data.postData.paramsObj);\n    }\n  } else if (some(['text/json', 'text/x-json', 'application/json', 'application/x-json'])) {\n    data.postData.mimeType = 'application/json';\n    if (data.postData.text) {\n      try {\n        data.postData.jsonObj = JSON.parse(data.postData.text);\n      } catch (e) {\n        this.request.debug(e);\n\n        // force back to text/plain\n        data.postData.mimeType = 'text/plain';\n      }\n    }\n  }\n  return data;\n};\nHar.prototype.options = function (options) {\n  // skip if no har property defined\n  if (!options.har) {\n    return options;\n  }\n  var har = {};\n  extend(har, options.har);\n\n  // only process the first entry\n  if (har.log && har.log.entries) {\n    har = har.log.entries[0];\n  }\n\n  // add optional properties to make validation successful\n  har.url = har.url || options.url || options.uri || options.baseUrl || '/';\n  har.httpVersion = har.httpVersion || 'HTTP/1.1';\n  har.queryString = har.queryString || [];\n  har.headers = har.headers || [];\n  har.cookies = har.cookies || [];\n  har.postData = har.postData || {};\n  har.postData.mimeType = har.postData.mimeType || 'application/octet-stream';\n  har.bodySize = 0;\n  har.headersSize = 0;\n  har.postData.size = 0;\n  if (!validate.request(har)) {\n    return options;\n  }\n\n  // clean up and get some utility properties\n  var req = this.prep(har);\n\n  // construct new options\n  if (req.url) {\n    options.url = req.url;\n  }\n  if (req.method) {\n    options.method = req.method;\n  }\n  if (Object.keys(req.queryObj).length) {\n    options.qs = req.queryObj;\n  }\n  if (Object.keys(req.headersObj).length) {\n    options.headers = req.headersObj;\n  }\n  function test(type) {\n    return req.postData.mimeType.indexOf(type) === 0;\n  }\n  if (test('application/x-www-form-urlencoded')) {\n    options.form = req.postData.paramsObj;\n  } else if (test('application/json')) {\n    if (req.postData.jsonObj) {\n      options.body = req.postData.jsonObj;\n      options.json = true;\n    }\n  } else if (test('multipart/form-data')) {\n    options.formData = {};\n    req.postData.params.forEach(function (param) {\n      var attachment = {};\n      if (!param.fileName && !param.fileName && !param.contentType) {\n        options.formData[param.name] = param.value;\n        return;\n      }\n\n      // attempt to read from disk!\n      if (param.fileName && !param.value) {\n        attachment.value = fs.createReadStream(param.fileName);\n      } else if (param.value) {\n        attachment.value = param.value;\n      }\n      if (param.fileName) {\n        attachment.options = {\n          filename: param.fileName,\n          contentType: param.contentType ? param.contentType : null\n        };\n      }\n      options.formData[param.name] = attachment;\n    });\n  } else {\n    if (req.postData.text) {\n      options.body = req.postData.text;\n    }\n  }\n  return options;\n};\nexports.Har = Har;","map":{"version":3,"names":["fs","require","qs","validate","extend","Har","request","prototype","reducer","obj","pair","name","undefined","value","arr","prep","data","queryObj","headersObj","postData","jsonObj","paramsObj","queryString","length","reduce","headers","reduceRight","header","cookies","map","cookie","join","some","type","mimeType","indexOf","params","text","stringify","JSON","parse","e","debug","options","har","log","entries","url","uri","baseUrl","httpVersion","bodySize","headersSize","size","req","method","Object","keys","test","form","body","json","formData","forEach","param","attachment","fileName","contentType","createReadStream","filename","exports"],"sources":["/Users/mohitgupta/Downloads/orgs/Clone/inst/node_modules/request/lib/har.js"],"sourcesContent":["'use strict'\n\nvar fs = require('fs')\nvar qs = require('querystring')\nvar validate = require('har-validator')\nvar extend = require('extend')\n\nfunction Har (request) {\n  this.request = request\n}\n\nHar.prototype.reducer = function (obj, pair) {\n  // new property ?\n  if (obj[pair.name] === undefined) {\n    obj[pair.name] = pair.value\n    return obj\n  }\n\n  // existing? convert to array\n  var arr = [\n    obj[pair.name],\n    pair.value\n  ]\n\n  obj[pair.name] = arr\n\n  return obj\n}\n\nHar.prototype.prep = function (data) {\n  // construct utility properties\n  data.queryObj = {}\n  data.headersObj = {}\n  data.postData.jsonObj = false\n  data.postData.paramsObj = false\n\n  // construct query objects\n  if (data.queryString && data.queryString.length) {\n    data.queryObj = data.queryString.reduce(this.reducer, {})\n  }\n\n  // construct headers objects\n  if (data.headers && data.headers.length) {\n    // loweCase header keys\n    data.headersObj = data.headers.reduceRight(function (headers, header) {\n      headers[header.name] = header.value\n      return headers\n    }, {})\n  }\n\n  // construct Cookie header\n  if (data.cookies && data.cookies.length) {\n    var cookies = data.cookies.map(function (cookie) {\n      return cookie.name + '=' + cookie.value\n    })\n\n    if (cookies.length) {\n      data.headersObj.cookie = cookies.join('; ')\n    }\n  }\n\n  // prep body\n  function some (arr) {\n    return arr.some(function (type) {\n      return data.postData.mimeType.indexOf(type) === 0\n    })\n  }\n\n  if (some([\n    'multipart/mixed',\n    'multipart/related',\n    'multipart/form-data',\n    'multipart/alternative'])) {\n    // reset values\n    data.postData.mimeType = 'multipart/form-data'\n  } else if (some([\n    'application/x-www-form-urlencoded'])) {\n    if (!data.postData.params) {\n      data.postData.text = ''\n    } else {\n      data.postData.paramsObj = data.postData.params.reduce(this.reducer, {})\n\n      // always overwrite\n      data.postData.text = qs.stringify(data.postData.paramsObj)\n    }\n  } else if (some([\n    'text/json',\n    'text/x-json',\n    'application/json',\n    'application/x-json'])) {\n    data.postData.mimeType = 'application/json'\n\n    if (data.postData.text) {\n      try {\n        data.postData.jsonObj = JSON.parse(data.postData.text)\n      } catch (e) {\n        this.request.debug(e)\n\n        // force back to text/plain\n        data.postData.mimeType = 'text/plain'\n      }\n    }\n  }\n\n  return data\n}\n\nHar.prototype.options = function (options) {\n  // skip if no har property defined\n  if (!options.har) {\n    return options\n  }\n\n  var har = {}\n  extend(har, options.har)\n\n  // only process the first entry\n  if (har.log && har.log.entries) {\n    har = har.log.entries[0]\n  }\n\n  // add optional properties to make validation successful\n  har.url = har.url || options.url || options.uri || options.baseUrl || '/'\n  har.httpVersion = har.httpVersion || 'HTTP/1.1'\n  har.queryString = har.queryString || []\n  har.headers = har.headers || []\n  har.cookies = har.cookies || []\n  har.postData = har.postData || {}\n  har.postData.mimeType = har.postData.mimeType || 'application/octet-stream'\n\n  har.bodySize = 0\n  har.headersSize = 0\n  har.postData.size = 0\n\n  if (!validate.request(har)) {\n    return options\n  }\n\n  // clean up and get some utility properties\n  var req = this.prep(har)\n\n  // construct new options\n  if (req.url) {\n    options.url = req.url\n  }\n\n  if (req.method) {\n    options.method = req.method\n  }\n\n  if (Object.keys(req.queryObj).length) {\n    options.qs = req.queryObj\n  }\n\n  if (Object.keys(req.headersObj).length) {\n    options.headers = req.headersObj\n  }\n\n  function test (type) {\n    return req.postData.mimeType.indexOf(type) === 0\n  }\n  if (test('application/x-www-form-urlencoded')) {\n    options.form = req.postData.paramsObj\n  } else if (test('application/json')) {\n    if (req.postData.jsonObj) {\n      options.body = req.postData.jsonObj\n      options.json = true\n    }\n  } else if (test('multipart/form-data')) {\n    options.formData = {}\n\n    req.postData.params.forEach(function (param) {\n      var attachment = {}\n\n      if (!param.fileName && !param.fileName && !param.contentType) {\n        options.formData[param.name] = param.value\n        return\n      }\n\n      // attempt to read from disk!\n      if (param.fileName && !param.value) {\n        attachment.value = fs.createReadStream(param.fileName)\n      } else if (param.value) {\n        attachment.value = param.value\n      }\n\n      if (param.fileName) {\n        attachment.options = {\n          filename: param.fileName,\n          contentType: param.contentType ? param.contentType : null\n        }\n      }\n\n      options.formData[param.name] = attachment\n    })\n  } else {\n    if (req.postData.text) {\n      options.body = req.postData.text\n    }\n  }\n\n  return options\n}\n\nexports.Har = Har\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}